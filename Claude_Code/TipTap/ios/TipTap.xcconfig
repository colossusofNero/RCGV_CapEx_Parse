// TipTap iOS Build Configuration
// This configuration file contains all the necessary build settings for TipTap iOS app

// MARK: - Basic App Configuration
PRODUCT_NAME = TipTap
PRODUCT_BUNDLE_IDENTIFIER = com.tiptap.app
MARKETING_VERSION = 1.0.0
CURRENT_PROJECT_VERSION = 1
DEVELOPMENT_TEAM = YOUR_TEAM_ID_HERE

// MARK: - Deployment Configuration
IPHONEOS_DEPLOYMENT_TARGET = 13.0
TARGETED_DEVICE_FAMILY = 1,2
SUPPORTS_MACCATALYST = YES

// MARK: - Code Signing Configuration
CODE_SIGN_STYLE = Automatic
CODE_SIGN_ENTITLEMENTS = TipTap/TipTap.entitlements
PROVISIONING_PROFILE_SPECIFIER =

// MARK: - NFC Configuration
INFOPLIST_KEY_NFCReaderUsageDescription = TipTap uses NFC to securely read payment information from NFC-enabled cards and devices for quick contactless payments.

// MARK: - Privacy and Permissions
INFOPLIST_KEY_NSCameraUsageDescription = TipTap needs camera access to scan QR codes for quick and secure payments.
INFOPLIST_KEY_NSLocationWhenInUseUsageDescription = TipTap uses your location to find nearby merchants and enhance payment security.
INFOPLIST_KEY_NSFaceIDUsageDescription = TipTap uses Face ID to securely authenticate payments and protect your financial information.
INFOPLIST_KEY_NSContactsUsageDescription = TipTap can access your contacts to help you quickly send tips to friends and family.
INFOPLIST_KEY_NSPhotoLibraryUsageDescription = TipTap can save payment receipts and QR codes to your photo library for your records.

// MARK: - Build Settings
SWIFT_VERSION = 5.0
ENABLE_BITCODE = NO
CLANG_ENABLE_MODULES = YES
CLANG_MODULES_AUTOLINK = YES
ALWAYS_EMBED_SWIFT_STANDARD_LIBRARIES = YES

// MARK: - Linking and Frameworks
FRAMEWORK_SEARCH_PATHS = $(inherited) "$(SRCROOT)/../node_modules/react-native/React" "$(SRCROOT)/../node_modules/react-native-nfc-manager/ios"
HEADER_SEARCH_PATHS = $(inherited) "$(SRCROOT)/../node_modules/react-native/React/**" "$(SRCROOT)/../node_modules/react-native-nfc-manager/ios/**"
LIBRARY_SEARCH_PATHS = $(inherited) "$(SRCROOT)/../node_modules/react-native-nfc-manager/ios"

// MARK: - Asset Catalog Configuration
ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon
ASSETCATALOG_COMPILER_GLOBAL_ACCENT_COLOR_NAME = AccentColor
ASSETCATALOG_COMPILER_INCLUDE_ALL_APPICON_ASSETS = YES

// MARK: - Launch Screen Configuration
INFOPLIST_KEY_UILaunchStoryboardName = LaunchScreen
INFOPLIST_KEY_UISupportedInterfaceOrientations = UIInterfaceOrientationPortrait UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight
INFOPLIST_KEY_UISupportedInterfaceOrientations_iPad = UIInterfaceOrientationPortrait UIInterfaceOrientationPortraitUpsideDown UIInterfaceOrientationLandscapeLeft UIInterfaceOrientationLandscapeRight

// MARK: - Security Configuration
GCC_PREPROCESSOR_DEFINITIONS = $(inherited) COCOAPODS=1 ENABLE_BITCODE=0
ENABLE_STRICT_OBJC_MSGSEND = YES
GCC_NO_COMMON_BLOCKS = YES
CLANG_WARN_BLOCK_CAPTURE_AUTORELEASING = YES
CLANG_WARN_BOOL_CONVERSION = YES
CLANG_WARN_COMMA = YES
CLANG_WARN_CONSTANT_CONVERSION = YES
CLANG_WARN_DEPRECATED_OBJC_IMPLEMENTATIONS = YES
CLANG_WARN_DIRECT_OBJC_ISA_USAGE = YES_ERROR
CLANG_WARN_DOCUMENTATION_COMMENTS = YES
CLANG_WARN_EMPTY_BODY = YES
CLANG_WARN_ENUM_CONVERSION = YES
CLANG_WARN_INFINITE_RECURSION = YES
CLANG_WARN_INT_CONVERSION = YES
CLANG_WARN_NON_LITERAL_NULL_CONVERSION = YES
CLANG_WARN_OBJC_IMPLICIT_RETAIN_SELF = YES
CLANG_WARN_OBJC_LITERAL_CONVERSION = YES
CLANG_WARN_OBJC_ROOT_CLASS = YES_ERROR
CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER = YES
CLANG_WARN_RANGE_LOOP_ANALYSIS = YES
CLANG_WARN_STRICT_PROTOTYPES = YES
CLANG_WARN_SUSPICIOUS_MOVE = YES
CLANG_WARN_UNGUARDED_AVAILABILITY = YES_AGGRESSIVE
CLANG_WARN_UNREACHABLE_CODE = YES

// MARK: - Performance Configuration
SWIFT_COMPILATION_MODE = wholemodule
SWIFT_OPTIMIZATION_LEVEL = -O
GCC_OPTIMIZATION_LEVEL = s
DEAD_CODE_STRIPPING = YES
STRIP_INSTALLED_PRODUCT = YES

// MARK: - Architecture Configuration
ARCHS = arm64
VALID_ARCHS = arm64 arm64e
EXCLUDED_ARCHS[sdk=iphonesimulator*] = arm64

// MARK: - Simulator Configuration (Development)
VALID_ARCHS[config=Debug][sdk=iphonesimulator*] = x86_64 arm64

// MARK: - React Native Configuration
OTHER_LDFLAGS = $(inherited) -ObjC -lc++
REACT_NATIVE_PATH = ../node_modules/react-native
USE_HERMES = true

// MARK: - Metro Configuration
BUNDLE_LOADER = $(BUILT_PRODUCTS_DIR)/TipTap.app/TipTap
INFOPLIST_FILE = TipTap/Info.plist

// MARK: - Keychain Configuration
OTHER_CODE_SIGN_FLAGS = --deep --force --verify-app --verbose=4 --strict

// MARK: - Widget Extension Configuration
ENABLE_APP_EXTENSIONS = YES

// MARK: - Background Processing Configuration
INFOPLIST_KEY_UIBackgroundModes = background-processing background-fetch remote-notification

// MARK: - URL Schemes Configuration
INFOPLIST_KEY_CFBundleURLTypes = [{"CFBundleURLName": "com.tiptap.app", "CFBundleURLSchemes": ["tiptap", "com.tiptap.app"]}]

// MARK: - Associated Domains Configuration
INFOPLIST_KEY_com_apple_developer_associated_domains = applinks:tiptap.com applinks:*.tiptap.com

// MARK: - Apple Pay Configuration
INFOPLIST_KEY_com_apple_developer_in_app_payments = merchant.com.tiptap.app

// MARK: - App Groups Configuration
INFOPLIST_KEY_com_apple_security_application_groups = group.com.tiptap.app group.com.tiptap.app.widgets

// MARK: - Push Notifications Configuration
INFOPLIST_KEY_aps_environment = development